{
  "id": "eaae0a4a-9f96-44e4-a9b1-9a19ebd7c90c",
  "prevId": "52a3343f-b6de-44b3-add4-e472980072af",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.analise_ativos": {
      "name": "analise_ativos",
      "schema": "",
      "columns": {
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "codigo_ativo": {
          "name": "codigo_ativo",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dados": {
          "name": "dados",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "data_analise": {
          "name": "data_analise",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "atualizado_em": {
          "name": "atualizado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_analise_usuario_ativo": {
          "name": "idx_analise_usuario_ativo",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "codigo_ativo",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_analise_usuario_id": {
          "name": "idx_analise_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_analise_data_analise": {
          "name": "idx_analise_data_analise",
          "columns": [
            {
              "expression": "data_analise",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversas": {
      "name": "conversas",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "titulo": {
          "name": "titulo",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "identificador_pagina": {
          "name": "identificador_pagina",
          "type": "identificador_pagina",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "mensagens": {
          "name": "mensagens",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'"
        },
        "criada_em": {
          "name": "criada_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "atualizada_em": {
          "name": "atualizada_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_conversas_usuario_id": {
          "name": "idx_conversas_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversas_usuario_atualizada": {
          "name": "idx_conversas_usuario_atualizada",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "atualizada_em",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.itens_plano_acao": {
      "name": "itens_plano_acao",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "texto_original": {
          "name": "texto_original",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_conclusao": {
          "name": "tipo_conclusao",
          "type": "tipo_conclusao_plano",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "origem": {
          "name": "origem",
          "type": "origem_item_plano",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "recomendacao_enriquecida": {
          "name": "recomendacao_enriquecida",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "fundamentacao": {
          "name": "fundamentacao",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ativos_relacionados": {
          "name": "ativos_relacionados",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'"
        },
        "status": {
          "name": "status",
          "type": "status_item_plano",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pendente'"
        },
        "criado_em": {
          "name": "criado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "atualizado_em": {
          "name": "atualizado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "concluido_em": {
          "name": "concluido_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_plano_acao_usuario_id": {
          "name": "idx_plano_acao_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_plano_acao_usuario_status": {
          "name": "idx_plano_acao_usuario_status",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_plano_acao_usuario_criado": {
          "name": "idx_plano_acao_usuario_criado",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "criado_em",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notificacoes": {
      "name": "notificacoes",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "tipo_notificacao",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "titulo": {
          "name": "titulo",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "descricao": {
          "name": "descricao",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "acao": {
          "name": "acao",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "visualizada": {
          "name": "visualizada",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "criada_em": {
          "name": "criada_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notificacoes_usuario_id": {
          "name": "idx_notificacoes_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notificacoes_usuario_criada": {
          "name": "idx_notificacoes_usuario_criada",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "criada_em",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.relatorios_extraidos": {
      "name": "relatorios_extraidos",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dados": {
          "name": "dados",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "atualizado_em": {
          "name": "atualizado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_extraidos_usuario_identificador": {
          "name": "idx_extraidos_usuario_identificador",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "identificador",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_extraidos_usuario_id": {
          "name": "idx_extraidos_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.relatorios_insights": {
      "name": "relatorios_insights",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dados": {
          "name": "dados",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "atualizado_em": {
          "name": "atualizado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insights_usuario_identificador": {
          "name": "idx_insights_usuario_identificador",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "identificador",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insights_usuario_id": {
          "name": "idx_insights_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.relatorios_metadados": {
      "name": "relatorios_metadados",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mes_referencia": {
          "name": "mes_referencia",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "nome_arquivo_original": {
          "name": "nome_arquivo_original",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "caminho_arquivo_pdf": {
          "name": "caminho_arquivo_pdf",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status_extracao": {
          "name": "status_extracao",
          "type": "status_extracao",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pendente'"
        },
        "origem_dados": {
          "name": "origem_dados",
          "type": "origem_dados",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'upload-automatico'"
        },
        "erro_extracao": {
          "name": "erro_extracao",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "data_upload": {
          "name": "data_upload",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_relatorios_usuario_identificador": {
          "name": "idx_relatorios_usuario_identificador",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "identificador",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_relatorios_usuario_id": {
          "name": "idx_relatorios_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_relatorios_mes_referencia": {
          "name": "idx_relatorios_mes_referencia",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "mes_referencia",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tarefas_background": {
      "name": "tarefas_background",
      "schema": "",
      "columns": {
        "identificador": {
          "name": "identificador",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "tipo_tarefa",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "status_tarefa",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'processando'"
        },
        "iniciado_em": {
          "name": "iniciado_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "concluido_em": {
          "name": "concluido_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "erro": {
          "name": "erro",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "descricao_resultado": {
          "name": "descricao_resultado",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url_redirecionamento": {
          "name": "url_redirecionamento",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tentativa_atual": {
          "name": "tentativa_atual",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "maximo_tentativas": {
          "name": "maximo_tentativas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "erro_recuperavel": {
          "name": "erro_recuperavel",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "proxima_tentativa_em": {
          "name": "proxima_tentativa_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "parametros": {
          "name": "parametros",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "cancelada_em": {
          "name": "cancelada_em",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelada_por": {
          "name": "cancelada_por",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_tarefas_status": {
          "name": "idx_tarefas_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tarefas_usuario_id": {
          "name": "idx_tarefas_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tarefas_iniciado_em": {
          "name": "idx_tarefas_iniciado_em",
          "columns": [
            {
              "expression": "iniciado_em",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.identificador_pagina": {
      "name": "identificador_pagina",
      "schema": "public",
      "values": [
        "dashboard",
        "reports",
        "insights",
        "trends",
        "desempenho",
        "aprender"
      ]
    },
    "public.origem_dados": {
      "name": "origem_dados",
      "schema": "public",
      "values": [
        "upload-automatico",
        "importacao-manual"
      ]
    },
    "public.origem_item_plano": {
      "name": "origem_item_plano",
      "schema": "public",
      "values": [
        "takeaway-dashboard",
        "insight-acao-sugerida"
      ]
    },
    "public.status_extracao": {
      "name": "status_extracao",
      "schema": "public",
      "values": [
        "pendente",
        "processando",
        "concluido",
        "erro"
      ]
    },
    "public.status_item_plano": {
      "name": "status_item_plano",
      "schema": "public",
      "values": [
        "pendente",
        "concluida",
        "ignorada"
      ]
    },
    "public.status_tarefa": {
      "name": "status_tarefa",
      "schema": "public",
      "values": [
        "processando",
        "concluido",
        "erro",
        "cancelada"
      ]
    },
    "public.tipo_conclusao_plano": {
      "name": "tipo_conclusao_plano",
      "schema": "public",
      "values": [
        "positivo",
        "neutro",
        "atencao"
      ]
    },
    "public.tipo_notificacao": {
      "name": "tipo_notificacao",
      "schema": "public",
      "values": [
        "success",
        "error",
        "warning",
        "info"
      ]
    },
    "public.tipo_tarefa": {
      "name": "tipo_tarefa",
      "schema": "public",
      "values": [
        "upload-pdf",
        "gerar-insights",
        "gerar-insights-consolidados",
        "analisar-ativo"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}